apiVersion: ferry.zsm.io/v1alpha1
kind: FerryPolicy
metadata:
  name: ferry-test
  namespace: ferry-system
spec:
  rules:
    - exports:
        - clusterName: ferry-cluster0
          match:
            labels:
              app: "web-0"

      imports:
        - clusterName: ferry-cluster1
        - clusterName: ferry-cluster2

    - exports:
        - clusterName: ferry-cluster1
          match:
            labels:
              app: "web-1"
        - clusterName: ferry-cluster2
          match:
            labels:
              app: "web-2"

      imports:
        - clusterName: ferry-cluster0


    - exports:
        - clusterName: ferry-cluster0
          match:
            namespace: test
            name: web-0

      imports:
        - clusterName: ferry-cluster1
          match:
            namespace: test
            name: web-0-0
        - clusterName: ferry-cluster2
          match:
            namespace: test
            name: web-0-0

    - exports:
        - clusterName: ferry-cluster1
          match:
            namespace: test
            name: web-1

      imports:
        - clusterName: ferry-cluster0
          match:
            namespace: test
            name: web-1-1

    - exports:
        - clusterName: ferry-cluster2
          match:
            namespace: test
            name: web-2

      imports:
        - clusterName: ferry-cluster0
          match:
            namespace: test
            name: web-2-2

    - exports:
        - clusterName: ferry-cluster2
          match:
            namespace: test
            name: web-2

      imports:
        - clusterName: ferry-cluster1
          match:
            namespace: test
            name: web-2

    - exports:
        - clusterName: ferry-cluster1
          match:
            namespace: test
            name: web-1

      imports:
        - clusterName: ferry-cluster2
          match:
            namespace: test
            name: web-1
